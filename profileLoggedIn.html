<!DOCTYPE html>
<html>
    <head>
        <meta charset="utf-8">
        <title>Profile Page</title>
        <link rel="stylesheet" href="styles.css">
        <link rel="manifest" href="/manifest.json">

        <style>
            /* Container for the “My Playlists” horizontal scroll section */
            .my-playlists-wrapper {
                max-width: 900px;
                margin: 0 auto;
                padding: 12px;
                display: flex;
                align-items: stretch;
                gap: 12px;
            }

            /* The horizontal list of playlist squares */
            .playlists-container {
                display: flex;
                gap: 12px;
                overflow-x: hidden;  /* Prevents scrollbars from showing */
                flex: 1;
            }

            /* Each playlist placeholder square */
            .playlist-square {
                width: 120px;
                height: 120px;
                background: #ffffff;
                border: 2px solid var(--mid-grey);
                border-radius: 8px;
                flex-shrink: 0;      /* Prevents shrinking when scrolling */
                cursor: pointer;
            }

            /* Arrow buttons for scrolling left/right */
            .scroll-btn {
                background: var(--dark-purple);
                color: var(--white);
                border: none;
                padding: 0 16px;
                border-radius: 6px;
                cursor: pointer;
                font-size: 20px;
            }
            .scroll-btn:hover {
                opacity: 0.8;
            }
        </style>
    </head>

    <body onload="loadUsername()">
        
        <!-- Top Navigation Bar -->
        <header class="navbar">
            <div class="nav-left">
              <a href="#" class="logo">PlayList Collaborator</a>
            </div>
          
            <div class="nav-right">
              <button id="homeBtn" onclick="toHome()">Home</button>
              <button id="searchBtn" onclick="toSearchPage()">Search</button>
              <button id="librariesBtn" onclick="toLibraries()">Library</button>
              <button id="profileBtn" onclick="toProfilePage()">Profile</button>
            </div>
        </header>

        <!-- Page Title -->
        <h1 style="text-align: center;">Profile</h1>

        <!-- Profile Card Section -->
        <section class="profile-card hcd-profile-card">

          <!-- Profile Avatar -->
          <div class="profile-avatar">
            <img src="images/user_icon.jpg" alt="Profile picture" id="profilePic">
            <!-- Shows colored dot (online/away/busy/offline) -->
            <span class="status-indicator" id="statusIndicator" data-status="online" title="Online"></span>
            <span class="pic-edit-text">Change Profile Picture</span>
          </div>

          <!-- Right-side profile information -->
          <div class="profile-info">
            <h2><span id="userNamePlaceholder">Guest</span></h2>

            <!-- Status dropdown selector -->
            <div class="status-row">
              <span id="statusLabel" class="status-label">Online</span>
              <label for="statusSelect" class="sr-only">Set status</label>
              <select id="statusSelect" class="status-select" aria-label="Set status">
                <option value="online">Online</option>
                <option value="away">Away</option>
                <option value="busy">Busy (DND)</option>
                <option value="offline">Offline</option>
              </select>
            </div>

            <!-- Followers + Following stats -->
            <div class="follow-stats">
              <span>Followers: <strong id="followersCount">0</strong></span>
              <span>Following: <strong id="followingCount">0</strong></span>
            </div>
          </div>
        </section>

        <!-- "My Playlists" Section -->
        <div style="max-width:900px; margin:24px auto;">

          <!-- Clickable header that navigates to playlist page -->
          <button 
            onclick="window.location.href='playlists.html'" 
            style="background:none; border:none; cursor:pointer; padding:0; margin:0 0 12px 0;"
          >
            <h2 style="margin:0; color:var(--dark-grey); text-align:left;">My Playlists</h2>
          </button>

          <!-- Scrollable playlist previews -->
          <div class="my-playlists-wrapper">

            <!-- Scroll left button -->
            <button class="scroll-btn" id="scrollLeft" onclick="scrollPlaylists(-1)">←</button>

            <!-- Container holding playlist squares -->
            <div class="playlists-container" id="playlistsContainer">
              <div class="playlist-square"></div>
              <div class="playlist-square"></div>
              <div class="playlist-square"></div>
              <div class="playlist-square"></div>
              <div class="playlist-square"></div>
              <div class="playlist-square"></div>
            </div>

            <!-- Scroll right button -->
            <button class="scroll-btn" id="scrollRight" onclick="scrollPlaylists(1)">→</button>
          </div>
        </div>

        <!-- JS controlling the profile status & general navigation -->
        <script src="status.js"></script>
        <script src="script.js"></script>

        <script>
            /**
             * Scrolls the playlist container left or right
             * @param {number} direction -1 for left, +1 for right
             */
            function scrollPlaylists(direction) {
                const container = document.getElementById('playlistsContainer');
                
                // Amount to scroll each time (square size + spacing)
                const scrollAmount = 140;

                container.scrollLeft += direction * scrollAmount;
            }
        </script>
    </body>
</html>
